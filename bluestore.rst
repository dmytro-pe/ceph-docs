*********
Bluestore
*********

* Снапшоты в блюсторе эффективнее чем в Filestore. В Filestore при изменении
  одного бита в обьекте -- копируется весь объект. В блюсторе я так понял, система
  слоёв. Но это не точно, нужны пруфы.
* Насчёт выбора размера БД: Google + "recommended rocksdb/rockswal sizes when using SSD/HDD"
* TODO: Как посмотреть текущий размер БД ?
* WAL находится в БД. БД находится в блюсторе. Если вынести БД то она вместе
  с журналом выносится. Вроде (нужен пруф) БД устроена так что самые горячие
  данные хранятся в её начале. Если БД не вмещается под отведённое место (если
  она выносная) то часть БД хранится отдельно, а часть в основном хранилище.
* Нет возможности после создания БД встроенной вынести её отдельно. Аналогично
  с её WAL.

* Настройки блюстора:

  .. code::

     bluestore_cache_size = 536870912
     bluestore_prefer_deferred_size_hdd = 104857600
     bluestore_prefer_deferred_size_ssd = 104857600
     bluestore_prefer_deferred_size = 104857600

  в т.ч. так как не понятно, понял ли что диск rotational.

* По исходникам смотрел -- он определяет что диск rotational и из этого делает
  вывод SSD или нет. В том числе при старте OSD оно смотрит не назначен ли класс
  OSD и ставит ssd/hdd на основании этого. А ещё применяет разные настройки в
  зависимости от этого. Bcache (всегда?) ставит флаг что диск что non-rotational
  ДАЖЕ ЕСЛИ РЕАЛЬНЫЙ КЕШ НЕ ПРИАТТАЧЕН к кеш-девайсу.
